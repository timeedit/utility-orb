description: >
  Treats group of gcp instance templates that matches a pattern as a fifo queue
  and removes the oldest
# What will this job do?

executor: default

parameters:
  STEPS_ENVIRONMENT:
    type: steps
    description: >
      Must contain env var `INSTANCE_TEMPLATE_QUEUE_SIZE`, `INSTANCE_TEMPLATE_SIMPLE_PATTERN`,
      and `GCLOUD_SERVICE_KEY`
steps:
  - checkout
  - steps: <<parameters.STEPS_ENVIRONMENT>>
  - auth_gcp
  - clean_templates
